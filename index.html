<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kerala Home Meals</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <a href="#/home" class="logo">
        <i class="bx bxs-bowl-hot"></i>
        <span class="logo-full">Malabar Palate</span>
      </a>

      <!-- Cart Icon for Mobile View -->
      <div class="mobile-icons">
        <div class="cart-icon" onclick="window.location='#/cart'">
          <i class="bx bx-cart"></i>
          <span id="cart-count">0</span>
        </div>
        <div class="menu-toggle" id="menu-toggle">
          <i class="bx bx-menu"></i>
        </div>
      </div>

      <nav class="navbar" id="navbar">
        <a href="#/home">Home</a>
        <a href="#/menu">Menu</a>
        <a href="#/review">Review</a>
        <a href="#/contact">Contact</a>
        <a href="#/cart">Cart</a>
      </nav>
    </header>

    <main class="container" id="app">
      <!-- Dynamic content will be rendered here -->
    </main>
    <div id="order-modal" class="modal">
      <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">&#10005;</button>
        <h2 class="modal-title">Confirm Your Order</h2>
        <form id="order-form" class="modal-form">
          <label for="customer-name">Your Name</label>
          <input
            type="text"
            id="customer-name"
            name="name"
            placeholder="Enter your full name"
            required
          />

          <label for="customer-email">Your Email</label>
          <input
            type="email"
            id="customer-email"
            name="email"
            placeholder="Enter your email"
            required
          />

          <textarea id="order-details" name="order" hidden></textarea>
          <button type="submit" id="send-button" disabled>Send Order</button>
        </form>
      </div>
    </div>

    <!-- <div class="cart" onclick="sendOrder()">
      <i class="bx bx-cart"></i> Send Order (<span id="cart-count">0</span>)
    </div> -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
      emailjs.init("TXDSCYxWtmZPDrkDu"); // replace with your actual public key

      const nameInput = document.getElementById("customer-name");
      const emailInput = document.getElementById("customer-email");
      const sendButton = document.getElementById("send-button");

      function openModal() {
        document.getElementById("order-modal").classList.add("show");
        document.getElementById("order-details").value =
          localStorage.getItem("orderDetails") || "No order";
        validateInputs();
      }

      function closeModal() {
        document.getElementById("order-modal").classList.remove("show");
      }

      function validateInputs() {
        sendButton.disabled = !(
          nameInput.value.trim() && emailInput.value.trim()
        );
      }

      nameInput.addEventListener("input", validateInputs);
      emailInput.addEventListener("input", validateInputs);

      document
        .getElementById("order-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          sendButton.disabled = true;

          emailjs.sendForm("service_8fwvtrx", "template_p4h22i6", this).then(
            () => {
              alert("✅ Order sent successfully!");
              closeModal();
            },
            (error) => {
              alert("❌ Failed to send order. Please try again.");
              console.error(error);
              sendButton.disabled = false;
            }
          );
        });
    </script>

    <script src="script.js"></script>
  </body>
</html>
